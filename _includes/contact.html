<h2>Contattami</h2>
<div class="card">
  <form id="contact-form" action="{{site.form_url}}" method="POST">
    <label for="fname">Nome</label>
    <input
      type="text"
      id="fname"
      name="firstname"
      required="true"
      placeholder="Il tuo nome..."
    />

    <label> Email</label>
    <input
      type="email"
      id="email"
      required="true"
      name="_replyto"
      placeholder="La tua email..."
    />

    <label for="subject">Messaggio</label>
    <textarea
      id="subject"
      required="true"
      name="message"
      placeholder="Scrivi qualcosa..."
      style="height: 170px"
    ></textarea>
    <div id="recaptcha" class="g-recaptcha" 
      data-sitekey="6LcxeCEbAAAAAGpeRwYZUYkOgmLXBsl5XY6lzjdV"
      data-size="invisible" 
      data-callback='onCompleted'>
    </div>
    <input id="submit" type="submit" value="Invia" class="button" />
  </form>
</div>
<script>
  $('#contact-form').submit(function(event) {
      console.log('form submitted.');

      if (!grecaptcha.getResponse()) {
          console.log('captcha not yet completed.');

          event.preventDefault(); //prevent form submit
          grecaptcha.execute();
      } else {
          console.log('form really submitted.');
      }
  });

  onCompleted = function() {
      console.log('captcha completed.');
      $('#contact-form').submit();
  }
</script>
